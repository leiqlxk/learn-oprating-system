## 机制
为了支持更大的地址空间，操作系统需要把当前没有再用的那部分地址空间找个地方存储起来，一般来说这个地方应该比内存有更大的容量
，当然一般来说也更慢（如果足够快，就直接可以像使用内存一样来使用了），在现代系统中，硬盘通常能够满足这个需求。     
增加交换空间让操作系统为多个并发运行的进程提供巨大地址空间的假象。多道程序的出现，强烈要求能够换出一些页。
### 交换空间
交换空间：在硬盘上开辟一部分空间用于物理页的移入和移除。如果操作系统能够以页大小为单元读取或者写入交换空间，为了达到这个目
的操作系统需要记住给定的硬盘地址（disk address）。交换空间的大小非常重要，它决定了系统在某一时刻能够使用的最大内存页数。
### 存在位
如果希望允许页交换到硬盘，必须添加更多机制：当硬件在PTE中查找时，可能发现页不在物理内存中。硬件或操作系统判断是否在内存中
的方法是通过页表项中的一条信息，即存在位。如果存在位设置为1则表示该页存在于物理内存中，如果存在位设置为零则页不在内存中，
而在硬盘上。访问不在物理内存中的页通常被称为页错误（page fault）。
### 页错误
不管是硬件管理还是软件管理的TLB，如果页不存在都油操作系统负责处理页错误，当一个页不存在已被交换到硬盘中页错误处理程序处理
页错误时，操作系统需要将该页交换到内存中。在许多系统中，操作系统可以用PTE中的某些位来存储硬盘地址，这些位通常用来存储像页
的PFN这样的数据。当操作系统接收到页错误时，它会在PTE中查找地址，并将请求发送到硬盘，将页读取到内存。       
当硬盘I/O完成时，操作系统会更新页表，将此页标记为存在，更新页表项的PFN字段以记录新混去页的内存位置，并重试指令。下一次还
是未命中，因为只更新了页表并没有更新TLB，所以这次会将页表中的地址更新到TLB中。最后在重试一次指令。
### 交换何时发生
操作系统并不会等到内存已经完全满了以后才会执行交换流程，然后才替换一个页为其他页腾出空间，因为操作系统可以更主动地预留一
小部分空闲空间。为了保证少量的空闲内存，大多数操作系统会设置高水位线和低水位线，来帮助决定何时从内存中清楚页。原理：当操
作系统发现有少于LW个页可用时，后台负责释放内存的线程会开始运行，知道有HW个可用物理页，这个后台线程有时称为交换守护进程或
页守护进程，释放完内存后就进入休眠状态。
